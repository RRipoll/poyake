FROMSQLFILE '/poyake-roadrunner/src/main/resources/metadata/acc/view/VUnallocatedCredit.sql'

VIEW  ENTITY acc.VUnallocatedCredit {
	revisionId INT SAMEAS acc.Ledger.revisionId
	unAllocated MONEY
	fullAmount MONEY
	PK ledgerItemId INT SAMEAS acc.Ledger.ledgerItemId
	customerId INT SAMEAS acc.Annotation.customerId
}

/*
================= Parser Information   ======================== 
Results:
VIEW FULL NAME: acc.VUnallocatedCredit  
VIEW NAME: VUnallocatedCredit 
VIEW SCHEMA: acc

Tables:
	TABLE: acc.allocation Alias: l
	TABLE: acc.allocation
	TABLE: acc.ledger Alias: l
	TABLE: acc.Annotation Alias: ann
	TABLE: acc.Cancellation
Output:
	COLUMN: revisionId -> NOT FOUND
	COLUMN: unAllocated -> NOT FOUND
	COLUMN: fullAmount -> NOT FOUND
	COLUMN: ledgerItemId -> NOT FOUND
	COLUMN: customerId -> NOT FOUND


================= Resolver Information ======================== 
Entity List:
	acc.Allocation ,audit.InputUser ,audit.InputSource ,acc.Ledger ,acc.LedgerItem ,acc.LedgerInfo ,acc.EnuTransactionType ,acc.EnuLedgerType ,acc.Annotation ,acc.EnuAnnotationType ,crm.CustomerPk ,acc.Balance ,acc.Cancellation ,acc.Repost ,acc.VTransactionHistory ,tolling.Trip ,payment.PaymentCredit ,payment.Payment ,payment.EnuPaymentType ,config.DatagridSetting ,CustomerPaymentMethod ,payment.PaymentMethod ,crm.CustomerSuplementaryContact ,crm.PersonOrCompanyPk ,crm.EnuContactType ,crm.EmailAddressPk ,crm.EnuCountry ,crm.EnuCustomerType ,crm.EnuPhoneNumberType ,crm.EnuStateProvince ,crm.HCustomer ,crm.PostalAddressPk ,crm.HEmailAddress ,crm.HPersonOrCompany ,crm.PhoneNumberPK ,crm.HPhoneNumber ,crm.HPostalAddress ,crm.VCustomerHistory ,VCustomerSearch ,crm.VDetailPageCaseList ,cs.CSCase ,cs.CSCasePK ,cs.EnuCaseType ,cs.EnuCaseStatus ,cs.EnuCasePriority ,crm.VDetailPageVehicleList ,tolling.LicensePlate ,tolling.EnuLicensePlateJurisdiction ,tolling.EnuLicensePlateType ,tolling.VehicleInfo ,tolling.Vehicle ,tolling.EnuVehicleClass ,tolling.EnuVehicleClassType ,tolling.CustomerVehicle ,cs.CustomerCase ,cs.VCaseSearch ,tolling.CustomerPass ,tolling.Pass ,tolling.EnuPromoType ,tolling.Gantry ,tolling.Promo ,tolling.TripInfo ,tolling.VFindVehicle ,tolling.VTripSearchColumns:
	SOLVED revisionId -> acc.Ledger.revisionId
	ATTRIBUTE_NOT_FOUND unAllocated -> 
	ATTRIBUTE_NOT_FOUND fullAmount -> 
	SOLVED ledgerItemId -> acc.Ledger.ledgerItemId
	SOLVED customerId -> acc.Annotation.customerId

================= Parse Tree ======================== 
tsql_file 
  batch 
    sql_clauses 
      sql_clause 
        ddl_clause 
          create_view createview
            simple_name 
              id 
                simple_id acc
              .
              id 
                simple_id VUnallocatedCredit
            as
            select_statement 
              query_expression 
                query_specification select
                  select_list 
                    select_list_elem 
                      column_elem 
                        id 
                          simple_id revisionId
                    ,
                    select_list_elem 
                      column_elem 
                        id 
                          simple_id unAllocated
                    ,
                    select_list_elem 
                      column_elem 
                        id 
                          simple_id fullAmount
                    ,
                    select_list_elem 
                      column_elem 
                        id 
                          simple_id ledgerItemId
                    ,
                    select_list_elem 
                      column_elem 
                        id 
                          simple_id customerId
                  from
                  table_sources 
                    table_source 
                      table_source_item_joined 
                        table_source_item 
                          derived_table 
                            subquery 
                              select_statement 
                                query_expression (
                                  query_expression 
                                    query_specification select
                                      select_list 
                                        select_list_elem 
                                          column_elem 
                                            table_name 
                                              id 
                                                simple_id l
                                            .
                                            id 
                                              simple_id revisionId
                                        ,
                                        select_list_elem 
                                          expression_elem 
                                            expression 
                                              expression 
                                                full_column_name 
                                                  id 
                                                    simple_id amount
                                              -
                                              expression 
                                                function_call isNull(
                                                  expression 
                                                    bracket_expression (
                                                      subquery 
                                                        select_statement 
                                                          query_expression 
                                                            query_specification select
                                                              select_list 
                                                                select_list_elem 
                                                                  expression_elem 
                                                                    expression 
                                                                      function_call 
                                                                        aggregate_windowed_function sum(
                                                                          all_distinct_expression 
                                                                            expression 
                                                                              full_column_name 
                                                                                id 
                                                                                  simple_id amount
                                                                          )
                                                              from
                                                              table_sources 
                                                                table_source 
                                                                  table_source_item_joined 
                                                                    table_source_item 
                                                                      table_name_with_hint 
                                                                        table_name 
                                                                          id 
                                                                            simple_id acc
                                                                          .
                                                                          id 
                                                                            simple_id allocation
                                                              where
                                                              search_condition 
                                                                search_condition_and 
                                                                  search_condition_not 
                                                                    predicate 
                                                                      expression 
                                                                        full_column_name 
                                                                          id 
                                                                            simple_id creditRevisionId
                                                                      comparison_operator =
                                                                      expression 
                                                                        full_column_name 
                                                                          table_name 
                                                                            id 
                                                                              simple_id l
                                                                          .
                                                                          id 
                                                                            simple_id revisionId
                                                                  and
                                                                  search_condition_not 
                                                                    predicate 
                                                                      expression 
                                                                        full_column_name 
                                                                          id 
                                                                            simple_id endAnnotationId
                                                                      is
                                                                      null_notnull null
                                                      )
                                                  ,
                                                  expression 
                                                    primitive_expression 
                                                      constant 0
                                                  )
                                            as_column_alias as
                                              column_alias 
                                                id 
                                                  simple_id unAllocated
                                        ,
                                        select_list_elem 
                                          column_elem 
                                            id 
                                              simple_id amount
                                            as_column_alias as
                                              column_alias 
                                                id 
                                                  simple_id fullAmount
                                        ,
                                        select_list_elem 
                                          column_elem 
                                            table_name 
                                              id 
                                                simple_id l
                                            .
                                            id 
                                              simple_id ledgerItemId
                                        ,
                                        select_list_elem 
                                          column_elem 
                                            table_name 
                                              id 
                                                simple_id ann
                                            .
                                            id 
                                              simple_id customerId
                                      from
                                      table_sources 
                                        table_source 
                                          table_source_item_joined 
                                            table_source_item 
                                              table_name_with_hint 
                                                table_name 
                                                  id 
                                                    simple_id acc
                                                  .
                                                  id 
                                                    simple_id ledger
                                              as_table_alias 
                                                table_alias 
                                                  id 
                                                    simple_id l
                                            join_part join
                                              table_source 
                                                table_source_item_joined 
                                                  table_source_item 
                                                    table_name_with_hint 
                                                      table_name 
                                                        id 
                                                          simple_id acc
                                                        .
                                                        id 
                                                          simple_id Annotation
                                                    as_table_alias 
                                                      table_alias 
                                                        id 
                                                          simple_id ann
                                              on
                                              search_condition 
                                                search_condition_and 
                                                  search_condition_not 
                                                    predicate 
                                                      expression 
                                                        full_column_name 
                                                          table_name 
                                                            id 
                                                              simple_id l
                                                          .
                                                          id 
                                                            simple_id annotationId
                                                      comparison_operator =
                                                      expression 
                                                        full_column_name 
                                                          table_name 
                                                            id 
                                                              simple_id ann
                                                          .
                                                          id 
                                                            simple_id annotationId
                                      where
                                      search_condition 
                                        search_condition_and 
                                          search_condition_not 
                                            predicate 
                                              expression 
                                                full_column_name 
                                                  table_name 
                                                    id 
                                                      simple_id l
                                                  .
                                                  id 
                                                    simple_id ledgerTypeId
                                              in(
                                              expression_list 
                                                expression 
                                                  primitive_expression 
                                                    constant 2
                                                ,
                                                expression 
                                                  primitive_expression 
                                                    constant 6
                                              )
                                          and
                                          search_condition_not not
                                            predicate exists(
                                              subquery 
                                                select_statement 
                                                  query_expression 
                                                    query_specification select
                                                      select_list 
                                                        select_list_elem 
                                                          expression_elem 
                                                            expression 
                                                              primitive_expression 
                                                                constant 1
                                                      from
                                                      table_sources 
                                                        table_source 
                                                          table_source_item_joined 
                                                            table_source_item 
                                                              table_name_with_hint 
                                                                table_name 
                                                                  id 
                                                                    simple_id acc
                                                                  .
                                                                  id 
                                                                    simple_id Cancellation
                                                      where
                                                      search_condition 
                                                        search_condition_and 
                                                          search_condition_not 
                                                            predicate 
                                                              expression 
                                                                full_column_name 
                                                                  id 
                                                                    simple_id cancelledRevisionId
                                                              comparison_operator =
                                                              expression 
                                                                full_column_name 
                                                                  table_name 
                                                                    id 
                                                                      simple_id l
                                                                  .
                                                                  id 
                                                                    simple_id revisionId
                                              )
                                  )
                          as_table_alias 
                            table_alias 
                              id 
                                simple_id X
                  where
                  search_condition 
                    search_condition_and 
                      search_condition_not 
                        predicate 
                          expression 
                            full_column_name 
                              id 
                                simple_id unAllocated
                          comparison_operator <
                          expression 
                            full_column_name 
                              id 
                                simple_id fullAmount
  <EOF>*/